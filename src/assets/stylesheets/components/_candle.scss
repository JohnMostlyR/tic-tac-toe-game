// Animated candle
// slightly changed adoptation of this great pen by Maria
// http://codepen.io/Shorina/pen/VbepBe
$flame-height: 150px;
$wick-height: 50px;
$orange: #ff6a00;
$orange-yellow: #ff9224;
$dark: #2c2b39;
$blue-dark: #30537d;
$blue-light: #76daff;
$yellow: #fbf348;
$yellow-grey: #58523a;

.c-candle {
  bottom: 30vmin;
  height: 170px;
  position: absolute;
  right: -160px;
  width: 70px;
}

.c-candle__wick{
  height: $wick-height;
  left: 50%;
  position: absolute;
  top: $flame-height - 0.8 * $wick-height;
  transform: translateX(-50%) skewX(2deg) scale(0.5);
  width: 6px;
  background: #23161a;
  border-radius: 10%;
  box-shadow: 0 0 2px 0 black;

  &:before{
    content: '';
    height: 10px;
    left: 50%;
    position: absolute;
    width: 0;
    box-shadow:
      0 -14px 10px 8px white,
      0 -10px 10px 8px rgba(255,215,0,0.7), //gold
      0 -3px 10px 8px rgba(255,106,0,0.7),  //orange
      0 6px 3px 4px black;
  }

  &:after{
    bottom:0;
    content: '';
    height: 0;
    left: 50%;
    position: absolute;
    width: 0;
    box-shadow:
      0 5px 2px 3px gold,
      0 20px 2px 14px gold,
      0 -6px 4px 5px rgba(98, 33, 27, 0.8),  //dark orange
      0 0px 1px 4px rgba(255, 106, 0, 0.7),  //orange
      0 0px 3px 4px $orange,
      0 5px 3px 4px gold;
  }
}

.c-flame {
  height: $flame-height;
  margin: 0 auto;
  position: relative;
  transform: scale(0.5);
  transform-origin: 50% 90%;
  width: 20px;
  //animation: move 3s infinite, move-left 3s infinite;

  &__top {
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    transform: skewY(-10deg);
    width: 20px;
    animation: flame-up 4s infinite;
    background: white;
    border-top-left-radius: 500%;
    border-bottom-left-radius: 50px;
    border-top-right-radius: 500%;
    border-bottom-right-radius: 50px;
    box-shadow:
      0 0 0 3px white,
      0 -20px 1px 4px white,
      0 -25px 2px 3px gold,
      0 -30px 5px 4px $orange,  //top
      0 0px 150px 10px $orange, //global
      0 -10px 2px 4px white,
      0 -5px 3px 3px white;
  }

  &__shadows {
    height: 60px;
    left: 50%;
    position: absolute;
    top: 0;
    width: 1px;
    border-radius: 50%;
    box-shadow:
      0 5px 20px 15px gold,
      0 0 100px 20px $orange,
      0 15px 50px 15px $orange,
      5px 30px 5px 13px $orange,
      5px 50px 5px 13px $orange,
      0 75px 50px 30px black;
  }

  &__bottom {
    bottom: 6px;
    height: 8px;
    left: 9px;
    position: absolute;
    transform: scale(0.9);
    width: 1px;
    border-radius: 1%;
    background: $dark;
    box-shadow:
      0 6px 10px 12px rgba(60, 76, 125, 0.3), //dark blue
      0 0 4px 8px $dark,
      0 -12px 10px 8px rgba(255,106,0, 0.5),  //orange
      0 5px 7px 12px $dark,
      0 -3px 10px 12px $dark,
      5px -10px 10px 5px red,
      0 -15px 10px 10px gold,
      5px -25px 10px 5px gold,
      0 2px 5px 10px $blue-dark,
      0 -2px 2px 14px $blue-light,
      0 2px 10px 12px $blue-light;
  }
}

.c-candle__wax {
  height: 100%;
  position: relative;
  top: 0;
  width: 100%;
  animation: inner-glow 4s infinite;
  background: $orange-yellow;
  background: linear-gradient(to bottom, rgba(246,169,20,1) 0%,rgba(187,121,16,1) 31%,rgba(41,21,10,1) 100%);
  border-top-left-radius: 34px;
  border-top-right-radius: 14px;
  box-shadow:
    inset 0 14px 13px -10px #fbf348,
    inset 0 26px 123px -31px rgba(255, 0, 0, 0.4),
    inset 0 2px 2px 0 black,
    0 0 1px 0 #ff6a00,
    inset 0 -50px 115px #29150a;
}

@keyframes move {
  0% {
    transform: skewX(2deg) skewY(5deg)
  }

  50% {
    transform: skewX(-2deg) skewY(-0deg)
  }

  100% {
    transform: skewX(2deg) skewY(5deg)
  }
}

@keyframes move-left {
  50% {
    transform: skewX(3deg);
  }
}

@keyframes flame-up {
  50% {
    box-shadow:
      0 0 0 3px white,
      0 -38px 1px 2px white,
      0 -41px 2px 3px gold,
      0 -50px 5px 4px $orange,  //orange top
      0 0px 150px 10px $orange, //orange global
      0 -10px 2px 4px white,
      0 -5px 3px 3px white;
  }
}

@keyframes brighten {
  50% {
    opacity: 1;
  }
}

@keyframes inner-glow {
  50% {
    box-shadow:
      inset 0 14px 13px -8px #fbf348 + 20,
      inset 0 26px 123px -31px rgba(255, 0, 0, 0.4),
      inset 0 2px 2px 0 black,
      0 0 1px 0 #ff6a00,
      inset 0 -50px 82px #29150a;
  }
}
